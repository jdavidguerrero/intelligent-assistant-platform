# Afro House — harmonic template
#
# Aesthetic: percussive, tribal, joyful, rooted. Dorian and natural minor modes.
# Progressions are short (2-bar) and highly repetitive — rhythm and groove over
# harmonic movement. Modal interchange between Dorian and natural minor common.
# Simpler voicings — triads and open fifths to leave space for percussion.
#
# Reference artists: Black Coffee, Enoo Napa, Themba, Da Capo

genre: afro house
default_mode: dorian        # dorian gives the characteristic raised VI
voicing: triads             # raw triads — room for rhythm

progressions:
  - degrees: [0, 3, 0, 4]   # i - IV - i - v  (dorian IV gives brightness)
    label: "i - IV - i - v"
    weight: 4
  - degrees: [0, 5, 0, 3]   # i - VI - i - iv
    label: "i - VI - i - iv"
    weight: 3
  - degrees: [0, 3, 4, 0]   # i - IV - v - i  (more movement)
    label: "i - IV - v - i"
    weight: 3
  - degrees: [0, 6, 3, 0]   # i - VII - IV - i  (Dorian VII)
    label: "i - VII - IV - i"
    weight: 2

tonic_degrees: [0]
avoid_penultimate: []

# ---------------------------------------------------------------------------
# Humanization configuration
# Afro house is the most human: loose timing, rich dynamics, lots of ghost notes
# ---------------------------------------------------------------------------
humanize_config:
  timing_jitter_ms: 8.0        # ±8ms — the loosest of all genres, tribal feel
  velocity_variation: 15       # ±15 velocity units — maximum expressiveness
  ghost_probability: 0.18      # 18% ghost notes — rich textural density

moods:
  - euphoric
  - neutral
  - dark

extensions:
  minor: minor     # keep triads
  major: major
  dim: dim

# ---------------------------------------------------------------------------
# Bass patterns — syncopated, tribal feel, root emphasis with rhythmic gaps
# ---------------------------------------------------------------------------
bass_patterns:
  - style: root
    base_octave: 2
    notes:
      - [0,  0,  3, 100]    # root, beat 1 (dotted 8th — syncopated feel)
      - [3,  0,  1,  82]    # root staccato, syncopation
      - [6,  7,  2,  90]    # fifth, offbeat momentum
      - [8,  0,  3, 100]    # root, beat 3 anchor
      - [11, 5,  1,  78]    # fourth, short passing tone
      - [12, 0,  2,  96]    # root, beat 4
      - [15, -5, 1,  72]    # pull-down into next bar (chromatic approach)

  - style: walk
    base_octave: 2
    notes:
      - [0,  0,  2, 100]    # root
      - [2,  3,  2,  84]    # minor third
      - [4,  5,  2,  90]    # fourth
      - [6,  7,  2,  84]    # fifth
      - [8,  0,  2, 100]    # root, re-anchor
      - [10, 7,  2,  84]    # fifth
      - [12, 5,  2,  90]    # fourth
      - [14, 0,  2,  78]    # root, settle

  - style: sub
    base_octave: 1            # Sub bass: tribal low-end presence
    notes:
      - [0,  0, 6, 104]       # root, held (dotted quarter — mirrors syncopated kick)
      - [6,  0, 2,  90]       # brief re-attack at offbeat (syncopated feel)
      - [8,  0, 6, 100]       # root, beat 3 held
      - [14, 0, 2,  85]       # pull into next bar

  - style: driving
    base_octave: 2
    notes:
      - [0,  0, 2, 108]       # beat 1
      - [2,  0, 2,  88]       # offbeat 1 (quieter — afro syncopation)
      - [4,  0, 2, 102]       # beat 2
      - [6,  0, 2,  90]       # offbeat 2
      - [8,  0, 2, 108]       # beat 3
      - [10, 0, 2,  88]       # offbeat 3
      - [12, 0, 2, 102]       # beat 4
      - [14, 0, 2,  90]       # offbeat 4

  - style: minimal
    base_octave: 2
    notes:
      - [0,  0, 3, 100]       # root, dotted 8th (matches syncopated kick rhythm)
      - [8,  0, 3,  96]       # root on beat 3

# ---------------------------------------------------------------------------
# Drum patterns — syncopated kick, strong percussion emphasis
# NOT 4-on-the-floor — the defining contrast with house sub-genres
# ---------------------------------------------------------------------------
drum_patterns:
  velocity_base:
    kick:    112
    snare:    88
    clap:     86
    hihat_c:  74
    hihat_o:  80

  grid:
    # Kick: syncopated — beat 1, offbeat beat 2, beat 4 (tribal pattern)
    kick:    [1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0]
    # Snare on offbeats — cross-rhythm feel
    snare:   [0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0]
    # Clap on beat 3 — the "tribal clap" signature
    clap:    [0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0]
    # Closed hi-hat: 8th notes — steady anchor amid syncopation
    hihat_c: [1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0, 1, 0]
    # Open hi-hat: syncopated offbeats
    hihat_o: [0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0]

  probability:
    kick:    [1.0, 0, 0, 0, 0, 0, 0.92, 0, 0, 0, 0, 0, 0.95, 0, 0, 0]
    snare:   [0, 0, 0, 0, 0.90, 0, 0, 0, 0, 0, 0.90, 0, 0, 0, 0, 0]
    clap:    [0, 0, 0, 0, 0, 0, 0, 0, 0.88, 0, 0, 0, 0, 0, 0, 0]
    hihat_c: [1.0, 0, 0.90, 0, 1.0, 0, 0.90, 0, 1.0, 0, 0.90, 0, 1.0, 0, 0.90, 0]
    hihat_o: [0, 0, 0, 0, 0, 0.86, 0, 0, 0, 0, 0, 0, 0, 0.86, 0, 0]

  # Afro house: hihat enters early, snare comes before clap
  energy_layers:
    1:  [kick]
    3:  [hihat_c]
    5:  [snare]
    7:  [clap]
    10: [hihat_o]

  fill:
    every_n_bars: 4
    kick:    [1, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 1, 0]
    snare:   [0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 1, 0, 1, 0, 1, 0]
    hihat_c: [1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 0, 0, 0]
